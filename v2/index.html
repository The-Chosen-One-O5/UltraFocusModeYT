<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Focus Mode YouTube Player</title>
  <style>
    /* [STUDY CSS.txt] CSS Styles Start - Extracted from source file */
    * {
      margin: 0; /* [cite: 1] */
      padding: 0; /* [cite: 1] */
      box-sizing: border-box; /* [cite: 1] */
    }

    :root {
      --primary: #4169e1; /* [cite: 1] */
      --primary-dark: #1e3a8a; /* [cite: 1] */
      --secondary: #8e2de2; /* [cite: 1] */
      --accent: #ff4500; /* [cite: 1] */
      --accent-alt: #ff8c00; /* [cite: 1] */
      --bg-dark: #0f0f1b; /* [cite: 1] */
      --bg-medium: #1a1a2e; /* [cite: 1] */
      --bg-light: #252538; /* [cite: 1] */
      --text: #e0e0ff; /* [cite: 1] */
      --text-dim: #9090b0; /* [cite: 1] */
    }

    body {
      background-color: var(--bg-dark); /* [cite: 1] */
      min-height: 100vh; /* [cite: 1] */
      display: flex; /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      overflow: hidden; /* [cite: 1] */
      font-size: 18px; /* [cite: 1] */
      line-height: 1.4; /* [cite: 1] */
    }

    .game-container {
      width: 100%; /* [cite: 1] */
      height: 100vh; /* [cite: 1] */
      position: relative; /* [cite: 1] */
      overflow: hidden; /* [cite: 1] */
      background-image: radial-gradient(circle at 10% 20%, rgba(142, 45, 226, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(65, 105, 225, 0.1) 0%, transparent 20%),
        linear-gradient(to bottom, var(--bg-dark), var(--bg-medium)); /* [cite: 1] */
      display: flex; /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      z-index: 1; /* [cite: 1] */
    }

    .game-container::before {
      content: ""; /* [cite: 1] */
      position: absolute; /* [cite: 1] */
      top: 0; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      height: 100%; /* [cite: 1] */
      background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239C92AC' fill-opacity='0.05' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 5v1H5V0zm1 5v1H5v-1h1z'/%3E%3C/g%3E%3C/svg%3E"); /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
      z-index: 2; /* [cite: 1] */
    }

    #landingPage,
    #signinForm,
    #inputForm {
      text-align: center; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      max-width: 800px; /* [cite: 1] */
      margin: 0 auto; /* [cite: 1] */
      padding: 40px 20px; /* [cite: 1] */
      position: relative; /* [cite: 1] */
      z-index: 10; /* [cite: 1] */
      background-color: rgba(15, 15, 27, 0.8); /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      border-radius: 8px; /* [cite: 1] */
      box-shadow: 0 0 20px rgba(142, 45, 226, 0.3); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    .title {
      font-family: monospace; /* [cite: 1] */
      font-size: 32px; /* [cite: 1] */
      font-weight: 600; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      margin-bottom: 20px; /* [cite: 1] */
      text-shadow: 3px 3px 0px var(--primary-dark); /* [cite: 1] */
      letter-spacing: 2px; /* [cite: 1] */
    }

    .title span {
      color: var(--secondary); /* [cite: 1] */
      position: relative; /* [cite: 1] */
      display: inline-block; /* [cite: 1] */
    }

    .title span::after {
      content: ""; /* [cite: 1] */
      position: absolute; /* [cite: 1] */
      bottom: -5px; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      height: 2px; /* [cite: 1] */
      background: linear-gradient(90deg, transparent, var(--accent), transparent); /* [cite: 1] */
    }

    .subtitle {
      font-size: 20px; /* [cite: 1] */
      color: var(--text-dim); /* [cite: 1] */
      margin-bottom: 30px; /* [cite: 1] */
    }

    button {
      display: inline-block; /* [cite: 1] */
      padding: 12px 30px; /* [cite: 1] */
      font-size: 18px; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      font-weight: 600; /* [cite: 1] */
      background: var(--secondary); /* [cite: 1] */
      border: none; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      margin: 0 10px 15px; /* [cite: 1] */
      transition: all 0.3s; /* [cite: 1] */
      position: relative; /* [cite: 1] */
      box-shadow: 4px 4px 0 var(--primary-dark); /* [cite: 1] */
      text-transform: uppercase; /* [cite: 1] */
      /* font-size: 14px; Reverted to 18px from base rule */
      letter-spacing: 1px; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

     button:hover {
        background: var(--primary); /* [cite: 1] */
        transform: translate(2px, 2px); /* [cite: 1] */
        box-shadow: 2px 2px 0 var(--primary-dark); /* [cite: 1] */
     }

     button:active {
       transform: translate(4px, 4px); /* [cite: 1] */
       box-shadow: none; /* [cite: 1] */
     }

    .github-btn {
        background: var(--bg-light); /* [cite: 1] */
        box-shadow: 4px 4px 0 var(--bg-medium); /* [cite: 1] */
    }

    .github-btn:hover {
        background: var(--bg-medium); /* [cite: 1] */
        box-shadow: 2px 2px 0 var(--bg-medium); /* [cite: 1] */
    }


    #features {
      display: flex; /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      gap: 20px; /* [cite: 1] */
      margin-top: 40px; /* [cite: 1] */
      flex-wrap: wrap; /* [cite: 1] */
      z-index: 10; /* [cite: 1] */
    }

    .feature {
      background: var(--bg-light); /* [cite: 1] */
      padding: 15px 20px; /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      width: 200px; /* [cite: 1] */
      box-shadow: 4px 4px 0 var(--bg-medium); /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      position: relative; /* [cite: 1] */
      overflow: hidden; /* [cite: 1] */
      z-index: 10; /* [cite: 1] */
    }

     .feature::before {
      content: ""; /* [cite: 1] */
      position: absolute; /* [cite: 1] */
      top: 0; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      height: 4px; /* [cite: 1] */
      background: linear-gradient(90deg, var(--primary), var(--secondary)); /* [cite: 1] */
    }

    .feature i { /* Assuming FontAwesome or similar is used */
      font-size: 24px; /* [cite: 1] */
      color: var(--secondary); /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
    }

    .feature p {
      font-size: 16px; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
    }

    input,
    select {
      display: block; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      max-width: 320px; /* [cite: 1] */
      margin: 10px auto; /* [cite: 1] */
      padding: 12px; /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      background: var(--bg-light); /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      outline: none; /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2); /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

     input:focus,
     select:focus {
      border-color: var(--secondary); /* [cite: 1] */
      box-shadow: 0 0 0 2px rgba(142, 45, 226, 0.3); /* [cite: 1] */
    }

    #inputForm {
      max-height: 80vh; /* [cite: 1] */
      overflow-y: auto; /* [cite: 1] */
      scrollbar-width: thin; /* [cite: 1] */
      scrollbar-color: var(--secondary) var(--bg-medium); /* [cite: 1] */
    }

    #inputForm::-webkit-scrollbar {
      width: 8px; /* [cite: 1] */
    }

    #inputForm::-webkit-scrollbar-track {
      background: var(--bg-medium); /* [cite: 1] */
    }

    #inputForm::-webkit-scrollbar-thumb {
      background: var(--secondary); /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      border: 2px solid var(--bg-medium); /* [cite: 1] */
    }

    #player {
      width: 100%; /* [cite: 1] */
      max-width: 1200px; /* [cite: 1] */
      aspect-ratio: 16 / 9; /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      overflow: hidden; /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      background: #000; /* [cite: 1] */
      border: 4px solid var(--primary); /* [cite: 1] */
      box-shadow: 0 0 20px rgba(65, 105, 225, 0.5); /* [cite: 1] */
      z-index: 5; /* [cite: 1] */
    }

    #timerDisplay {
      position: fixed; /* [cite: 1] */
      top: 10px; /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      /* font-size: 24px; */ /* Overridden below */ /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      cursor: move; /* [cite: 1] */
      padding: 10px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
    }

    #timerDisplay button {
      pointer-events: auto; /* [cite: 1] */
      padding: 5px 10px; /* [cite: 1] */
      margin: 0 5px; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      z-index: 102; /* [cite: 1] */
       /* Inherits base button styles */
    }

    #pointsDisplay {
      position: fixed; /* [cite: 1] */
      top: 50px; /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      font-size: 18px; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      font-weight: 600; /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 8px 12px; /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
    }

     #clockDisplay {
      position: fixed; /* [cite: 1] */
      top: 90px; /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      font-size: 20px; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      font-weight: bold; /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      padding: 8px 12px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
    }

    #clockDisplay .time {
      color: var(--primary); /* [cite: 1] */
    }

    #clockDisplay .period {
      color: var(--secondary); /* [cite: 1] */
    }

    #progressBar {
        width: 200px; /* [cite: 1] */
        height: 10px; /* [cite: 1] */
        background: var(--bg-light); /* [cite: 1] */
        display: none; /* Initially hidden */ /* [cite: 1] */
        margin-top: 5px; /* [cite: 1] */
        border: 2px solid var(--primary); /* [cite: 1] */
        z-index: 101; /* [cite: 1] */
    }

    #progressFill {
        height: 100%; /* [cite: 1] */
        width: 0; /* Starts empty */ /* [cite: 1] */
        background: linear-gradient(90deg, var(--primary), var(--secondary)); /* [cite: 1] */
    }

    /* Removed #sitesBox and #sitesPopup styles (not in provided code) */

    #restartBtn {
      display: none; /* Initially hidden */ /* [cite: 1] */
      position: fixed; /* [cite: 1] */
      top: 10px; /* [cite: 1] */
      right: 10px; /* [cite: 1] */
      background: var(--accent); /* [cite: 1] */
      z-index: 103; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
       /* Inherits base button styles */
    }

    #videoSidebar {
      position: fixed; /* [cite: 1] */
      right: -320px; /* Initially hidden */ /* [cite: 1] */
      top: 0; /* [cite: 1] */
      width: 300px; /* [cite: 1] */
      height: 100%; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      transition: right 0.3s ease; /* [cite: 1] */
      padding: 20px; /* [cite: 1] */
      overflow-y: auto; /* [cite: 1] */
      z-index: 102; /* [cite: 1] */
      border-left: 4px solid var(--primary); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    .thumbnail {
      width: 100%; /* [cite: 1] */
      margin-bottom: 15px; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      border: 2px solid transparent; /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      transition: all 0.3s; /* [cite: 1] */
      image-rendering: pixelated; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    .thumbnail:hover {
      border-color: var(--secondary); /* [cite: 1] */
      transform: scale(1.05); /* [cite: 1] */
    }

     #minimizeBtn { /* Assuming this is for the video sidebar */
      position: absolute; /* [cite: 1] */
      top: 5px; /* [cite: 1] */
      right: 5px; /* [cite: 1] */
      background: var(--accent); /* [cite: 1] */
      border: none; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      padding: 2px 6px; /* [cite: 1] */
      margin: 0; /* [cite: 1] */
      box-shadow: none; /* [cite: 1] */
      z-index: 102; /* [cite: 1] */
       /* Needs pointer-events: auto if not inherited */
       pointer-events: auto; /* Added for clarity */
    }

     .url-container { /* For adding video URLs */
      display: flex; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
    }

    .url-container button {
      margin-left: 10px; /* [cite: 1] */
      padding: 5px 10px; /* [cite: 1] */
      background: var(--accent); /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
       /* Inherits base button styles */
       text-transform: none; /* Override */
       letter-spacing: normal; /* Override */
       font-weight: normal; /* Override */
    }

    #statsBtn,
    #todoBtn,
    #pyqBtn { /* Buttons likely in inputForm */
      padding: 8px 16px; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      margin: 0 5px 15px; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
       /* Inherits base button styles */
    }


    #analytics,
    #todoList {
      position: absolute; /* Positioned relative to parent */ /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 15px; /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      z-index: 100; /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    #analytics {
      top: 90px; /* Position below buttons */ /* [cite: 1] */
    }

    #todoList {
      top: 50px; /* Position below buttons */ /* [cite: 1] */
      width: 300px; /* [cite: 1] */
      max-height: 400px; /* [cite: 1] */
    }

    #tasks { /* Container within todoList */
      overflow-y: auto; /* [cite: 1] */
      max-height: 320px; /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
      background: none; /* [cite: 1] */
       /* Needs pointer-events */
       pointer-events: auto; /* Added */
    }

     #analytics h3,
     #todoList h3 {
      /* font-size: 20px; */ /* Overridden below */ /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
      color: var(--secondary); /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      text-align: center; /* [cite: 1] */
    }

    #analytics p {
      font-size: 16px; /* [cite: 1] */
      margin: 5px 0; /* [cite: 1] */
      border-bottom: 1px solid var(--bg-light); /* [cite: 1] */
      padding-bottom: 5px; /* [cite: 1] */
    }


    .task-line {
      display: flex; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      margin-bottom: 8px; /* [cite: 1] */
      background: var(--bg-light); /* [cite: 1] */
      padding: 5px; /* [cite: 1] */
      border: 1px solid var(--primary); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    .task-line input[type="checkbox"] {
      margin-right: 10px; /* [cite: 1] */
      width: 16px; /* [cite: 1] */
      height: 16px; /* [cite: 1] */
      appearance: none; /* Custom style */ /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      position: relative; /* For checkmark */ /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
      cursor: pointer; /* Added */
    }

     .task-line input[type="checkbox"]:checked {
       background: var(--secondary); /* [cite: 1] */
     }

     .task-line input[type="checkbox"]:checked::after {
      content: "‚úì"; /* [cite: 1] */
      position: absolute; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      top: -2px; /* [cite: 1] */
      left: 2px; /* [cite: 1] */
    }

    .task-line input[type="text"] {
      flex-grow: 1; /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      background: transparent; /* [cite: 1] */
      border: none; /* [cite: 1] */
      border-bottom: 1px solid var(--text-dim); /* [cite: 1] */
      padding: 2px 0; /* [cite: 1] */
      outline: none; /* [cite: 1] */
      box-shadow: none; /* [cite: 1] */
      margin: 0; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
    }

     .task-line input[type="text"]:focus {
       border-bottom: 1px solid var(--secondary); /* [cite: 1] */
       box-shadow: none; /* [cite: 1] */
     }

     .task-line .remove-task {
      margin-left: 10px; /* [cite: 1] */
      color: var(--accent); /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      background: none; /* [cite: 1] */
      border: none; /* [cite: 1] */
      padding: 0; /* [cite: 1] */
      line-height: 1; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
       /* Should be a button semantically */
    }

    .task-line .set-deadline {
      margin-left: 5px; /* [cite: 1] */
      color: var(--primary); /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      background: none; /* [cite: 1] */
      border: none; /* [cite: 1] */
      padding: 2px 5px; /* [cite: 1] */
      border: 1px solid var(--primary); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 11; /* [cite: 1] */
       /* Should be a button semantically */
    }

     .task-line .set-deadline:hover {
       background: var(--primary); /* [cite: 1] */
       color: var(--text); /* [cite: 1] */
     }

     .task-line .deadline-info {
      margin-left: 5px; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      color: var(--accent-alt); /* [cite: 1] */
    }

    .task-line .points-info {
      margin-left: 5px; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      color: var(--secondary); /* [cite: 1] */
    }

     #lofiPlayer {
      position: fixed; /* [cite: 1] */
      bottom: 10px; /* [cite: 1] */
      right: 10px; /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 10px; /* [cite: 1] */
      border: 2px solid var(--primary); /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    #lofiPlayer button {
      background: var(--secondary); /* [cite: 1] */
      border: none; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      padding: 5px 10px; /* [cite: 1] */
      margin: 0 2px; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      z-index: 102; /* [cite: 1] */
      /* Inherits base button styles for hover/active */
      text-transform: none; /* Override */
      letter-spacing: normal; /* Override */
      font-weight: normal; /* Override */
    }

    #achievementOverlay {
      position: fixed; /* [cite: 1] */
      top: 0; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      width: 100vw; /* [cite: 1] */
      height: 100vh; /* [cite: 1] */
      background: rgba(0, 0, 0, 0.8); /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      color: gold; /* [cite: 1] */
      font-size: 32px; /* [cite: 1] */
      font-weight: bold; /* [cite: 1] */
      z-index: 104; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      text-align: center; /* [cite: 1] */
      text-shadow: 3px 3px 0 var(--primary-dark); /* [cite: 1] */
      background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E"); /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
    }

     #achievementLevel {
      position: fixed; /* [cite: 1] */
      top: 10px; /* [cite: 1] */
      right: 10px; /* [cite: 1] */
      font-size: 20px; /* [cite: 1] */
      font-weight: bold; /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 8px 12px; /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
    }

    #streakDisplay {
      position: fixed; /* [cite: 1] */
      top: 60px; /* [cite: 1] */
      right: 10px; /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 8px 12px; /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      pointer-events: none; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
    }

    .glow {
      text-shadow: 0 0 10px var(--text); /* [cite: 1] */
      animation: pulse 2s infinite; /* [cite: 1] */
    }

    .box-glow {
      border: 2px solid gold; /* [cite: 1] */
      padding: 5px; /* [cite: 1] */
      box-shadow: 0 0 10px gold; /* [cite: 1] */
      animation: pulse 2s infinite; /* [cite: 1] */
    }

    .rainbow {
      background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet); /* [cite: 1] */
      -webkit-background-clip: text; /* [cite: 1] */
      -webkit-text-fill-color: transparent; /* [cite: 1] */
      animation: rainbow 3s infinite; /* [cite: 1] */
    }


    @keyframes rainbow {
      0% { filter: hue-rotate(0deg); } /* [cite: 1] */
      100% { filter: hue-rotate(360deg); } /* [cite: 1] */
    }

    @keyframes pulse {
      0% { opacity: 1; } /* [cite: 1] */
      50% { opacity: 0.7; } /* [cite: 1] */
      100% { opacity: 1; } /* [cite: 1] */
    }

     #confirmationDialog,
     #streakShieldDialog,
     #doublePointsDialog,
     #deadlineDialog,
     #sessionCompleteDialog {
      position: fixed; /* [cite: 1] */
      top: 50%; /* [cite: 1] */
      left: 50%; /* [cite: 1] */
      transform: translate(-50%, -50%); /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 20px; /* [cite: 1] */
      border: 4px solid var(--accent); /* [cite: 1] */
      box-shadow: 0 0 20px rgba(255, 69, 0, 0.5); /* [cite: 1] */
      z-index: 105; /* Lower than Pomodoro overlay */ /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      text-align: center; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
    }

     #confirmationDialog p,
     #streakShieldDialog p,
     #doublePointsDialog p,
     #deadlineDialog p,
     #sessionCompleteDialog p {
      font-size: 16px; /* [cite: 1] */
      margin-bottom: 20px; /* [cite: 1] */
    }

     #confirmationDialog button,
     #streakShieldDialog button,
     #doublePointsDialog button,
     #deadlineDialog button,
     #sessionCompleteDialog button {
      padding: 8px 20px; /* [cite: 1] */
      margin: 0 10px; /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 106; /* Ensure buttons clickable */ /* [cite: 1] */
       /* Inherits base button styles */
       text-transform: none; /* Override */
       letter-spacing: normal; /* Override */
       font-weight: normal; /* Override */
    }

     #confirmBtn,
     #streakShieldConfirmBtn,
     #doublePointsConfirmBtn,
     #deadlineConfirmBtn,
     #sessionContinueBtn {
      background: var(--accent); /* [cite: 1] */
    }

    #cancelBtn,
    #streakShieldCancelBtn,
    #doublePointsCancelBtn,
    #deadlineCancelBtn,
    #sessionEndBtn {
      background: var(--primary); /* [cite: 1] */
    }

    #deadlineDialog input,
    #deadlineDialog select {
      margin: 10px auto; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      max-width: 250px; /* [cite: 1] */
       /* Inherits base input/select styles */
    }

     #pdfToggle { /* Button to show PDF viewer */
      display: none; /* Initially hidden */ /* [cite: 1] */
      position: fixed; /* [cite: 1] */
      bottom: 10px; /* [cite: 1] */
      right: 10px; /* [cite: 1] */
      background: var(--primary); /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      /* Style as button */
       padding: 8px 16px; /* Added */
       font-size: 12px; /* Added */
       color: var(--text); /* Added */
       border: none; /* Added */
       font-family: monospace; /* Added */
       box-shadow: 4px 4px 0 var(--primary-dark); /* Added */
       text-transform: uppercase; /* Added */
       letter-spacing: 1px; /* Added */
    }

     #pdfViewer {
      display: none; /* Initially hidden */ /* [cite: 1] */
      position: fixed; /* [cite: 1] */
      top: 50%; /* [cite: 1] */
      left: 50%; /* [cite: 1] */
      transform: translate(-50%, -50%); /* [cite: 1] */
      width: 400px; /* [cite: 1] */
      height: 500px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 15px; /* [cite: 1] */
      border: 4px solid var(--primary); /* [cite: 1] */
      box-shadow: 0 0 20px rgba(65, 105, 225, 0.5); /* [cite: 1] */
      z-index: 101; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    #pdfInput {
      margin-bottom: 10px; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 102; /* [cite: 1] */
       /* Style as input */
       max-width: none; /* Override */
       padding: 8px; /* Adjust */
       font-size: 14px; /* Adjust */
    }

    #pdfFrame {
      width: 100%; /* [cite: 1] */
      height: calc(100% - 40px); /* Adjust for input */ /* [cite: 1] */
      border: none; /* [cite: 1] */
      background: #fff; /* [cite: 1] */
    }

    #fireBox { /* AI Popup Toggle? */
      position: fixed; /* [cite: 1] */
      bottom: 10px; /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      width: 40px; /* [cite: 1] */
      height: 40px; /* [cite: 1] */
      background: var(--primary); /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      display: flex; /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      font-size: 24px; /* Icon size? */ /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      z-index: 100; /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      border: 2px solid var(--secondary); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
       color: var(--text); /* Added */
    }

     #fireBox:hover {
       background: var(--secondary); /* [cite: 1] */
       transform: translate(2px, 2px); /* [cite: 1] */
       box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
     }

     #aiPopup {
      position: fixed; /* [cite: 1] */
      bottom: 60px; /* Above fireBox */ /* [cite: 1] */
      left: 10px; /* [cite: 1] */
      width: 300px; /* [cite: 1] */
      height: 400px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      border-radius: 0; /* [cite: 1] */
      padding: 5px; /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      z-index: 101; /* Above fireBox */ /* [cite: 1] */
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      border: 4px solid var(--primary); /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

    #aiPopup iframe {
      width: 100%; /* [cite: 1] */
      height: 100%; /* [cite: 1] */
      border: none; /* [cite: 1] */
    }

    .game-sidebar {
      position: fixed; /* [cite: 1] */
      left: -250px; /* Initially hidden */ /* [cite: 1] */
      top: 0; /* [cite: 1] */
      width: 250px; /* [cite: 1] */
      height: 100vh; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      border-right: 4px solid var(--primary); /* [cite: 1] */
      z-index: 200; /* Below Pomodoro Overlay */ /* [cite: 1] */
      transition: left 0.3s ease; /* [cite: 1] */
      padding: 20px 0; /* [cite: 1] */
      box-shadow: 4px 0 10px rgba(0, 0, 0, 0.3); /* [cite: 1] */
      overflow-y: auto; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }

     /* Sidebar hover trigger */
     .sidebar-trigger:hover + .game-sidebar,
     .game-sidebar:hover {
       left: 0; /* [cite: 1] */
     }

     .sidebar-trigger {
      position: fixed; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      top: 50%; /* [cite: 1] */
      transform: translateY(-50%); /* [cite: 1] */
      width: 20px; /* [cite: 1] */
      height: 80px; /* [cite: 1] */
      background: var(--primary); /* [cite: 1] */
      z-index: 199; /* Below sidebar content */ /* [cite: 1] */
      border-radius: 0 5px 5px 0; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      display: flex; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      font-weight: bold; /* [cite: 1] */
      writing-mode: vertical-rl; /* [cite: 1] */
      text-orientation: mixed; /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      letter-spacing: 1px; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
    }


    .sidebar-section {
      padding: 15px; /* [cite: 1] */
      border-bottom: 2px solid var(--bg-dark); /* [cite: 1] */
    }

    .sidebar-section h3 {
      color: var(--secondary); /* [cite: 1] */
      font-size: 16px; /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
      text-transform: uppercase; /* [cite: 1] */
      letter-spacing: 1px; /* [cite: 1] */
    }

     .sidebar-section a,
     .sidebar-section button {
      display: block; /* [cite: 1] */
      width: 100%; /* [cite: 1] */
      padding: 8px 10px; /* [cite: 1] */
      margin: 5px 0; /* [cite: 1] */
      background: var(--bg-light); /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      border: 1px solid var(--primary); /* [cite: 1] */
      text-align: left; /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      cursor: pointer; /* [cite: 1] */
      transition: all 0.2s; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      z-index: 201; /* Above sidebar bg */ /* [cite: 1] */
       /* Resetting button styles */
       box-shadow: none; /* [cite: 1] */
       font-weight: normal; /* [cite: 1] */
       text-transform: none; /* [cite: 1] */
       letter-spacing: normal; /* [cite: 1] */
       border-radius: 0; /* Added */
       text-decoration: none; /* Added for <a> */
    }

     .sidebar-section a:hover,
     .sidebar-section button:hover {
       background: var(--primary); /* [cite: 1] */
       transform: translateX(5px); /* [cite: 1] */
       box-shadow: none; /* [cite: 1] */
     }

     .sidebar-section button:active {
        transform: translateX(5px) translateY(1px); /* [cite: 1] */
        box-shadow: none; /* [cite: 1] */
     }


    .dashboard-info {
      display: flex; /* [cite: 1] */
      flex-direction: column; /* [cite: 1] */
      gap: 8px; /* [cite: 1] */
    }

    .dashboard-info p {
      font-size: 14px; /* [cite: 1] */
      display: flex; /* [cite: 1] */
      justify-content: space-between; /* [cite: 1] */
    }

    .dashboard-info p span:first-child {
      font-weight: bold; /* [cite: 1] */
      color: var(--primary); /* [cite: 1] */
    }


    #mysteryBoxPopup {
      position: fixed; /* [cite: 1] */
      top: 50%; /* [cite: 1] */
      left: 50%; /* [cite: 1] */
      transform: translate(-50%, -50%); /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 20px; /* [cite: 1] */
      border: 4px solid gold; /* [cite: 1] */
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); /* [cite: 1] */
      z-index: 105; /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      text-align: center; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      width: 300px; /* [cite: 1] */
    }

    #mysteryBoxPopup h3 {
      color: gold; /* [cite: 1] */
      font-size: 20px; /* [cite: 1] */
      margin-bottom: 15px; /* [cite: 1] */
    }

    #mysteryBoxPopup p {
      font-size: 16px; /* [cite: 1] */
      margin-bottom: 20px; /* [cite: 1] */
    }

    #mysteryBoxPopup button {
      padding: 8px 20px; /* [cite: 1] */
      background: var(--accent); /* [cite: 1] */
      font-size: 14px; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
       /* Inherits base button styles */
       text-transform: none; /* Override */
       letter-spacing: normal; /* Override */
       font-weight: normal; /* Override */
    }


    /* Audio tracks store styles */
    #audioTracksStore {
      position: fixed; /* [cite: 1] */
      top: 50%; /* [cite: 1] */
      left: 50%; /* [cite: 1] */
      transform: translate(-50%, -50%); /* [cite: 1] */
      width: 400px; /* [cite: 1] */
      max-height: 500px; /* [cite: 1] */
      background: var(--bg-medium); /* [cite: 1] */
      padding: 20px; /* [cite: 1] */
      border: 4px solid var(--secondary); /* [cite: 1] */
      box-shadow: 0 0 20px rgba(142, 45, 226, 0.5); /* [cite: 1] */
      z-index: 105; /* [cite: 1] */
      display: none; /* Initially hidden */ /* [cite: 1] */
      text-align: center; /* [cite: 1] */
      pointer-events: auto; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      overflow-y: auto; /* [cite: 1] */
    }

    #audioTracksStore h3 {
      color: var(--secondary); /* [cite: 1] */
      font-size: 20px; /* [cite: 1] */
      margin-bottom: 15px; /* [cite: 1] */
    }

    .audio-track-item {
      display: flex; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      justify-content: space-between; /* [cite: 1] */
      padding: 10px; /* [cite: 1] */
      margin-bottom: 10px; /* [cite: 1] */
      background: var(--bg-light); /* [cite: 1] */
      border: 1px solid var(--primary); /* [cite: 1] */
    }

    .audio-track-item .track-name { /* Corrected selector */
       /* Placeholder for styling */
       flex-grow: 1; /* Added */
       text-align: left; /* Added */
       margin-right: 10px; /* Added */
    }

    .audio-track-item.locked .track-name {
      color: var(--text-dim); /* [cite: 1] */
    }

    .audio-track-item.unlocked .track-name {
      color: var(--accent-alt); /* [cite: 1] */
    }

     .unlock-track-btn {
      padding: 5px 10px; /* [cite: 1] */
      background: var(--secondary); /* [cite: 1] */
      font-size: 12px; /* [cite: 1] */
      margin: 0; /* Override default button margin */ /* [cite: 1] */
      box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
      /* Inherits base button styles */
       text-transform: none; /* Override */
       letter-spacing: normal; /* Override */
       font-weight: normal; /* Override */
       color: var(--text); /* Added */
       border: none; /* Added */
       cursor: pointer; /* Added */
       pointer-events: auto; /* Added */
    }

     .unlock-track-btn:hover {
       background: var(--primary); /* [cite: 1] */
       transform: translate(1px, 1px); /* [cite: 1] */
       box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3); /* [cite: 1] */
     }

     .unlock-track-btn:disabled {
       background: var(--bg-light); /* [cite: 1] */
       color: var(--text-dim); /* [cite: 1] */
       cursor: not-allowed; /* [cite: 1] */
       box-shadow: none; /* [cite: 1] */
       transform: none; /* [cite: 1] */
       pointer-events: none; /* Added */
     }


    /* Quiet Pomodoro Styles (This is likely the "Quiet Promoter") */
    #pomodoroOverlay {
      position: fixed; /* [cite: 1] */
      top: 0; /* [cite: 1] */
      left: 0; /* [cite: 1] */
      width: 100vw; /* [cite: 1] */
      height: 100vh; /* [cite: 1] */
      background-color: rgba(15, 15, 27, 0.85); /* [cite: 1] */
      backdrop-filter: blur(8px); /* [cite: 1] */
      display: none; /* Hidden by default */ /* [cite: 1] */
      justify-content: center; /* [cite: 1] */
      align-items: center; /* [cite: 1] */
      z-index: 250; /* High z-index to cover other elements */ /* [cite: 1] */
      flex-direction: column; /* [cite: 1] */
      font-family: monospace; /* [cite: 1] */
      opacity: 0; /* Start hidden for transition */ /* [cite: 1] */
      transition: opacity 0.3s ease-in-out; /* [cite: 1] */
      pointer-events: none; /* Default to none */
    }

    #pomodoroOverlay.visible {
      display: flex; /* [cite: 1] */
      opacity: 1; /* [cite: 1] */
      pointer-events: auto; /* Allow interaction ONLY when visible */ /* [cite: 1] */
      /* This will block clicks on elements underneath, like the sidebar (z-index 200) */
    }

    #pomodoroTimerDisplay {
      font-size: 6rem; /* Large timer display */ /* [cite: 1] */
      color: var(--text); /* [cite: 1] */
      margin-bottom: 20px; /* [cite: 1] */
      text-shadow: 3px 3px 0px var(--primary-dark); /* [cite: 1] */
    }

    #pomodoroStatus {
      font-size: 1.5rem; /* [cite: 1] */
      color: var(--secondary); /* [cite: 1] */
      margin-bottom: 30px; /* [cite: 1] */
      text-transform: uppercase; /* [cite: 1] */
      letter-spacing: 2px; /* [cite: 1] */
    }

    #pomodoroControls {
        /* Container for buttons */
        pointer-events: auto; /* Ensure container allows clicks through to buttons */
    }

    #pomodoroControls button {
      padding: 10px 25px; /* [cite: 1] */
      font-size: 1rem; /* [cite: 1] */
      margin: 0 15px; /* [cite: 1] */
      z-index: 251; /* Ensure controls are above overlay background */ /* [cite: 1] */
      pointer-events: auto; /* Ensure buttons are always clickable */ /* [cite: 1] */
       /* Inherits base button styles */
    }

    #pomodoroStartBtn {
      background-color: var(--primary); /* Specific style for start */ /* [cite: 1] */
    }

    #pomodoroStartBtn:hover {
      background-color: var(--primary-dark); /* [cite: 1] */
    }

    #pomodoroResetBtn {
      background-color: var(--accent); /* Specific style for reset */ /* [cite: 1] */
    }

    #pomodoroResetBtn:hover {
      background-color: var(--accent-alt); /* [cite: 1] */
    }

    /* Responsive Styles */
    @media (max-width: 800px) {
      .title { font-size: 24px; } /* [cite: 1] */
      button { padding: 8px 16px; font-size: 12px; margin: 0 5px 10px; } /* [cite: 1] */
      #features { flex-direction: column; align-items: center; } /* [cite: 1] */
      .feature { width: 90%; max-width: 250px; } /* [cite: 1] */
      #timerDisplay, #pointsDisplay, #clockDisplay { font-size: 14px; padding: 5px 8px; } /* [cite: 1] */
      #achievementLevel, #streakDisplay { font-size: 14px; padding: 5px 8px; } /* [cite: 1] */
      #videoSidebar { width: 250px; right: -270px; /* Adjust hidden position */ } /* [cite: 1] */
      #lofiPlayer button { padding: 3px 6px; font-size: 10px; } /* [cite: 1] */
      #confirmationDialog, #streakShieldDialog, #doublePointsDialog, #deadlineDialog, #sessionCompleteDialog { width: 90%; max-width: 300px; } /* [cite: 1] */
      #confirmationDialog p, #streakShieldDialog p, #doublePointsDialog p, #deadlineDialog p, #sessionCompleteDialog p { font-size: 14px; } /* [cite: 1] */
      #pdfViewer { width: 90%; height: 80%; max-height: 500px; } /* [cite: 1] */
      #aiPopup { width: 90%; max-width: 300px; height: 350px; bottom: 50px; left: 5px; } /* [cite: 1] */
       #fireBox { width: 35px; height: 35px; font-size: 20px; bottom: 5px; left: 5px; } /* Adjust */
      #mysteryBoxPopup { width: 90%; max-width: 280px; } /* [cite: 1] */
      #audioTracksStore { width: 90%; max-width: 350px; } /* [cite: 1] */

      /* Responsive Pomodoro */
      #pomodoroTimerDisplay { font-size: 4rem; } /* [cite: 1] */
      #pomodoroStatus { font-size: 1rem; } /* [cite: 1] */
      #pomodoroControls button { padding: 8px 15px; font-size: 0.9rem; margin: 0 10px; } /* [cite: 1] */

       /* Responsive Sidebar */
       .game-sidebar { width: 200px; left: -200px; }
       .sidebar-trigger { width: 15px; height: 60px; font-size: 10px;}
    }
    /* [STUDY CSS.txt] CSS Styles End */


  </style>
</head>
<body>

  <div class="game-container"> <div class="sidebar-trigger">MENU</div> <div class="game-sidebar"> <div class="sidebar-section"> <h3>Dashboard</h3> <div class="dashboard-info"> <p><span>Hero:</span> <span id="sidebarUsername">Guest</span></p> <p><span>Level:</span> <span id="sidebarLevel">Mortal</span></p> <p><span>XP:</span> <span id="sidebarXP">0</span></p> <p><span>Streak:</span> <span id="sidebarStreak">0 days</span></p> </div>
      </div>
      <div class="sidebar-section"> <h3>Allied Realms</h3> <a href="https://forestquest.vercel.app/" target="_blank" rel="noreferrer">FOREST QUEST - TASK MANAGEMENT</a> <a href="https://focuswithpomodoro.netlify.app/" target="_blank" rel="noreferrer">POMODORO REALM</a> <a href="https://the-chosen-one-o5.github.io/Daily-Schedule/" target="_blank" rel="noreferrer">DAILY QUEST PLANNER</a> </div>
      <div class="sidebar-section"> <h3>Focus Tools</h3> <button id="quietPomodoroBtn">QUIET POMODORO</button> </div>
      <div class="sidebar-section"> <h3>Shop</h3> <button id="streakShieldBtn">STREAK SHIELD</button> <button id="doublePointsBtn">DOUBLE POINTS POWER-UP</button> <button id="audioStoreBtn">AUDIO TRACKS STORE</button> </div>
      <div class="sidebar-section"> <h3>Account</h3> <button id="logoutBtn">LOGOUT</button> </div>
    </div>

    <div id="landingPage"> <div class="title">QUEST FOR <span>FOCUS</span></div> <div class="subtitle">Begin your learning adventure!</div> <button data-action="start-game">START GAME</button> <button class="github-btn" data-action="github">GITHUB REPO</button> <div id="features"> <div class="feature"> <i class="fas fa-ad"></i> <p>Ad Free<br>No distractions on your quest</p> </div>
        <div class="feature"> <i class="fas fa-moon"></i> <p>Dark Mode<br>Save your vision for the final boss</p> </div>
        </div>
    </div>

    <div id="signinForm" style="display: none;"> <div class="title">CREATE YOUR <span>ACCOUNT</span></div> <div class="subtitle">Sign in to track your progress</div> <input type="text" id="username" placeholder="Hero Name" required /> <input type="password" id="password" placeholder="Secret Code" required /> <button data-action="sign-in">ENTER REALM</button> <p>New adventurer? <button data-action="create-account">CREATE ACCOUNT</button></p> </div>

    <div id="inputForm" style="display: none;"> <div class="url-container"> <input type="text" id="youtubeUrl" placeholder="Paste YouTube Video URL here"> <button data-action="add-video">Add Video</button> </div>

       <button id="todoBtn">TO-DO</button> <button id="statsBtn">HERO STATS</button> <button id="pyqBtn">TRAINING GROUNDS</button> <div id="todoList"> <h3>TO-DO</h3> <div id="tasks"> <div class="task-line"> <input type="checkbox" class="task-check" /> <input type="text" class="task-text" placeholder="Add a quest..." /> <button class="set-deadline">‚è∞</button> <button class="remove-task">x</button> <span class="deadline-info"></span> <span class="points-info"></span> </div>
        </div>
         <button data-action="add-task">Add Quest</button> <button data-action="save-tasks">SAVE QUESTS</button> </div>

      <div id="analytics"> <h3>HERO STATS</h3> <p>Focus Time: <span id="totalFocusTime">0m</span></p> <p>Points: <span id="totalPoints">0</span></p> <p>Distractions: <span id="totalDistractions">0</span></p> </div>

      <div id="player"></div> </div> <div id="timerDisplay">00:00 <button>‚èØÔ∏è</button><button>‚èπÔ∏è</button></div> <div id="pointsDisplay">Points: 0</div> <div id="clockDisplay"><span class="time">00:00</span> <span class="period">AM</span></div> <div id="progressBar"><div id="progressFill"></div></div> <button id="restartBtn">RESTART</button> <div id="achievementLevel">Level: Mortal</div> <div id="streakDisplay">Streak: 0 üî•</div> <button id="pdfToggle">PDF</button> <div id="fireBox">üî•</div> <div id="videoSidebar"> <button id="minimizeBtn">X</button> </div>
    <div id="lofiPlayer"> <button>‚ñ∂Ô∏è</button> <button>‚èπÔ∏è</button> <span>Lofi Radio</span>
    </div>
    <div id="achievementOverlay">Achievement Unlocked!</div> <div id="confirmationDialog"> <p>Are you sure?</p> <button id="confirmBtn">Yes</button> <button id="cancelBtn">No</button> </div>
     <div id="streakShieldDialog"> <p>Activate Streak Shield? (Cost: X points)</p> <button id="streakShieldConfirmBtn">Activate</button> <button id="streakShieldCancelBtn">Cancel</button> </div>
     <div id="doublePointsDialog"> <p>Activate Double Points? (Cost: Y points)</p> <button id="doublePointsConfirmBtn">Activate</button> <button id="doublePointsCancelBtn">Cancel</button> </div>
     <div id="deadlineDialog"> <p>Set Deadline & Points:</p> <input type="datetime-local" id="deadlineInput"> <input type="number" id="pointsInput" placeholder="Points (e.g., 10)"> <button id="deadlineConfirmBtn">Set</button> <button id="deadlineCancelBtn">Cancel</button> </div>
    <div id="sessionCompleteDialog"> <p>Session Complete! Well done, hero!</p> <button id="sessionContinueBtn">Continue Quest</button> <button id="sessionEndBtn">End Session</button> </div>
    <div id="pdfViewer"> <input type="file" id="pdfInput" accept="application/pdf"> <iframe id="pdfFrame"></iframe> </div>
    <div id="aiPopup"> <iframe src="about:blank"></iframe> </div>
     <div id="mysteryBoxPopup"> <h3>Mystery Box!</h3> <p>You found a mysterious reward!</p> <button id="claimMysteryRewardBtn">Claim!</button> </div>
    <div id="audioTracksStore"> <h3>Audio Tracks Store</h3> <div id="audioTrackList"> <div class="audio-track-item locked"> <span class="track-name">Epic Battle Music (Locked)</span> <button class="unlock-track-btn" data-track-id="battle1" data-cost="50">Unlock (50 pts)</button> </div>
            <div class="audio-track-item unlocked"> <span class="track-name">Peaceful Forest Ambience</span> <span>Unlocked</span> </div>
        </div>
         <button id="closeAudioStoreBtn">Close Store</button> </div>

    <div id="pomodoroOverlay"> <div id="pomodoroTimerDisplay">25:00</div> <div id="pomodoroStatus">Work Time</div> <div id="pomodoroControls"> <button id="pomodoroStartBtn">Start</button> <button id="pomodoroResetBtn">Reset</button> </div>
        </div>


  </div> <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // --- JAVASCRIPT MODIFICATIONS NEEDED ---
    // The original JavaScript logic from STUDY CSS.txt was incomplete.
    // You will need to add/modify the JavaScript here based on the original file's logic.

    (function() { // IIFE to encapsulate scope
      document.addEventListener('DOMContentLoaded', () => {
        console.log("DOM fully loaded and parsed");

        // --- PLACEHOLDER FOR ALL YOUR ORIGINAL VARIABLES AND STATE ---
        let player;
        let timerInterval;
        let timeLeft = 0;
        let points = 0;
        // ... other variables (like username, level, xp, streak, tasks, etc.) ...
        let isFocusModeActive = false; // Example state variable
        let isPomodoroActive = false; // Example state variable
        let distractionCount = 0; // Example state variable
        let totalDistractions = 0; // Example state variable


        // --- SELECTORS (Ensure these match your original JS) ---
        const landingPage = document.getElementById('landingPage');
        const signinForm = document.getElementById('signinForm');
        const inputForm = document.getElementById('inputForm');
        const playerDiv = document.getElementById('player');
        const timerDisplay = document.getElementById('timerDisplay');
        const pointsDisplay = document.getElementById('pointsDisplay');
        const clockDisplay = document.getElementById('clockDisplay');
        // ... other selectors ...
        const pomodoroOverlay = document.getElementById('pomodoroOverlay'); // [cite: 1]
        const quietPomodoroBtn = document.getElementById('quietPomodoroBtn'); // [cite: 1]
        const sidebar = document.querySelector('.game-sidebar'); // [cite: 1]


        // --- CORE FUNCTIONS (Placeholder - Use your original JS functions) ---

        function loadState() {
            console.log("Load state function (implement)");
            // Load user data, tasks, settings from localStorage
        }

        function saveState() {
            console.log("Save state function (implement)");
            // Save user data, tasks, settings to localStorage
        }

        function updateUI() {
            console.log("Update UI function (implement)");
            // Update timer, points, level, streak, task list display etc.
        }

        function startTimer(duration) {
            console.log("Start timer function (implement)");
            // Start the main countdown timer
        }

        function stopTimer() {
            console.log("Stop timer function (implement)");
            // Stop the main countdown timer
        }

        function awardPoints(amount) {
            console.log("Award points function (implement)");
            // Add points and update display/state
        }

         function updateAnalytics() {
             console.log("Update analytics display (implement)");
             // Update the #analytics div content
         }

         function loadTasks() {
             console.log("Load tasks function (implement)");
             // Load tasks into #todoList
         }

         function saveTasks() {
            console.log("Save tasks function (implement)");
            // Save tasks from #todoList
         }

        // --- YOUTUBE PLAYER API ---
        window.onYouTubeIframeAPIReady = function() {
          console.log("YouTube API Ready");
          // You need the logic here to initialize the player when needed
          // Example: Initialize player when a video URL is entered
        };

        function loadVideoById(videoId) {
            console.log(`Loading video: ${videoId} (implement)`);
            if (player && player.loadVideoById) {
                 // player.loadVideoById(videoId);
            } else {
                 // Initialize player first if not already done
                 /* player = new YT.Player('player', {
                     height: '360', // Adjust as needed
                     width: '640',  // Adjust as needed
                     videoId: videoId,
                     playerVars: {
                         'playsinline': 1, // Important for mobile
                         'controls': 1,    // Show player controls
                         'disablekb': 1    // Disable YouTube keyboard controls if needed
                     },
                     events: {
                         'onReady': onPlayerReady,
                         'onStateChange': onPlayerStateChange
                     }
                 }); */
            }
        }

        function onPlayerReady(event) {
            console.log("Player Ready (implement)");
            // event.target.playVideo(); // Optional: Auto-play
        }

        function onPlayerStateChange(event) {
             console.log("Player State Change (implement)");
             // YT.PlayerState.PLAYING, PAUSED, ENDED etc.
             // Implement logic for tracking focus time based on PLAYING state
             // Implement logic for pausing timer/awarding points on ENDED etc.
        }

        // --- FOCUS MODE ---

        function toggleFocusMode() {
             console.log("Toggling Focus Mode (implement)");
             isFocusModeActive = !isFocusModeActive;

             if (isFocusModeActive) {
                 console.log("Entering Focus Mode");
                 // Hide unnecessary elements (e.g., sidebar, controls not needed)
                 // Show player, timer prominently

                 // *** FIX NEEDED HERE (Fullscreen) ***
                 // Add the code to request fullscreen for the relevant container
                 // Example: document.documentElement.requestFullscreen();
                 // Or: document.querySelector('.game-container').requestFullscreen();
                 // Remember to handle browser prefixes if necessary and check availability.
                 console.log("FIX: Add requestFullscreen() call here.");
                 if (document.documentElement.requestFullscreen) {
                     document.documentElement.requestFullscreen().catch(err => {
                        console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                     });
                 } else {
                     console.warn("Fullscreen API is not supported by this browser.");
                 }


                 // Start focus timer / video playback?
             } else {
                 console.log("Exiting Focus Mode");
                 // Restore hidden elements
                 // Pause timer / video?

                 // Exit fullscreen if active
                 if (document.fullscreenElement && document.exitFullscreen) {
                     document.exitFullscreen();
                 }
             }
             updateUI(); // Reflect focus mode state changes
        }


        // --- QUIET POMODORO ---
        function toggleQuietPomodoro() {
            console.log("Toggling Quiet Pomodoro (implement)");
            isPomodoroActive = !isPomodoroActive;
            if (isPomodoroActive) {
                pomodoroOverlay.classList.add('visible'); // [cite: 1]
                // *** FIX / CHECK NEEDED HERE (Menu Clickability) ***
                // The CSS already sets pointer-events: auto on the visible overlay[cite: 1].
                // This *should* block clicks on underlying elements like the sidebar [cite: 1] (z-index 200 vs 250).
                // Ensure no other JS logic interferes with this or accidentally makes underlying elements clickable.
                console.log("Quiet Pomodoro activated. Overlay should block underlying elements.");
                // Start Pomodoro timer logic here
            } else {
                pomodoroOverlay.classList.remove('visible'); // [cite: 1]
                 console.log("Quiet Pomodoro deactivated.");
                // Stop Pomodoro timer logic here
            }
        }


        // --- EVENT LISTENERS ---

        // Landing/Signin Buttons
         document.body.addEventListener('click', (event) => {
             const action = event.target.dataset.action;
             if (action) {
                 console.log(`Action clicked: ${action}`);
                 switch(action) {
                     case 'start-game':
                         // Show signin or input form based on state
                         landingPage.style.display = 'none'; // [cite: 1]
                         signinForm.style.display = 'block'; // [cite: 1]
                         break;
                     case 'github':
                          window.open('YOUR_GITHUB_REPO_URL', '_blank'); // Replace URL
                         break;
                     case 'sign-in':
                         // Handle sign in logic
                         // If successful: signinForm.style.display = 'none'; inputForm.style.display = 'block'; loadState(); updateUI();
                         break;
                    case 'create-account':
                         // Handle account creation logic
                         // If successful: signinForm.style.display = 'none'; inputForm.style.display = 'block'; loadState(); updateUI();
                         break;
                     case 'add-video':
                         // Get URL from #youtubeUrl input, extract Video ID, call loadVideoById()
                         break;
                     case 'add-task':
                         // Add a new empty task line to #tasks
                         break;
                     case 'save-tasks':
                         saveTasks();
                         break;
                      // Add cases for other data-action buttons
                 }
             }

             // Listener for specific buttons if not using data-action
             if (event.target.id === 'quietPomodoroBtn') { // [cite: 1]
                 toggleQuietPomodoro();
             }
              if (event.target.id === 'logoutBtn') { // [cite: 1]
                 console.log("Logout (implement)");
                 // Clear state, show landing page
             }
              if (event.target.id === 'todoBtn') { // [cite: 1]
                 document.getElementById('todoList').style.display = 'block'; // [cite: 1]
             }
              if (event.target.id === 'statsBtn') { // [cite: 1]
                 updateAnalytics(); // Update stats before showing
                 document.getElementById('analytics').style.display = 'block'; // [cite: 1]
             }
             // Add listeners for closing popups, etc.

             // Task list specific buttons (delegated)
             if (event.target.classList.contains('remove-task')) { // [cite: 1]
                 event.target.closest('.task-line').remove();
             }
             if (event.target.classList.contains('set-deadline')) { // [cite: 1]
                  // Show deadline dialog, passing the task element reference
             }

         });


        // *** FIX NEEDED HERE (Focus Mode Toggle) ***
        // Remove any existing listener for a cross button if it exists.
        // Add the keydown listener for the 'T' key to call toggleFocusMode().
        document.addEventListener('keydown', (event) => {
          // Check if a modal/input is focused to avoid conflicts
           const activeElement = document.activeElement;
           const isInputFocused = activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA' || activeElement.isContentEditable;

           if (!isInputFocused && event.key.toUpperCase() === 'T') {
                console.log("'T' key pressed - toggling focus mode.");
                toggleFocusMode();
            }
             // Add other keybindings if needed (e.g., Esc for modals)
             if (event.key === 'Escape') {
                 // Close open modals/popups like Pomodoro overlay, dialogs etc.
                 if (isPomodoroActive) {
                     toggleQuietPomodoro();
                 }
                 // Add logic to close other dialogs
             }
        });


        // Timer Dragging Logic (Example - Use your original)
        let isDragging = false;
        let startX, startY, initialX, initialY;

        timerDisplay.addEventListener("mousedown", (e) => {
             // Prevent dragging if clicking on a button inside the timer
             if (e.target.tagName === 'BUTTON') return;

             isDragging = true;
             startX = e.clientX;
             startY = e.clientY;
             initialX = timerDisplay.offsetLeft;
             initialY = timerDisplay.offsetTop;
             timerDisplay.style.cursor = 'grabbing'; // Indicate dragging
             e.preventDefault(); // Prevent text selection
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                const currentX = initialX + e.clientX - startX;
                const currentY = initialY + e.clientY - startY;
                const containerRect = document.body.getBoundingClientRect(); // Or specific container
                const timerRect = timerDisplay.getBoundingClientRect();

                // Clamp position within viewport bounds
                const clampedX = Math.max(0, Math.min(currentX, containerRect.width - timerRect.width));
                const clampedY = Math.max(0, Math.min(currentY, containerRect.height - timerRect.height));

                timerDisplay.style.left = `${clampedX}px`;
                timerDisplay.style.top = `${clampedY}px`;
            }
        });

        document.addEventListener("mouseup", () => {
            if (isDragging) {
               isDragging = false;
               timerDisplay.style.cursor = 'move'; // Reset cursor
            }
        });
        timerDisplay.style.cursor = 'move'; // Initial cursor style


        // Distraction Detection (Visibility Change)
        document.addEventListener("visibilitychange", () => {
          if (document.hidden && (isFocusModeActive || isPomodoroActive)) {
            console.log("Distraction detected: Tab hidden during focus/pomodoro.");
            distractionCount++; // Increment session distraction count (if used)
            totalDistractions++; // Increment lifetime distractions
            saveState(); // Save updated distraction count
            updateAnalytics(); // Update displayed stats
          } else if (!document.hidden && (isFocusModeActive || isPomodoroActive)) {
             console.log("Tab focused again.");
          }
        });


        // --- INITIALIZATION ---
        console.log("Running initialization logic");
        // loadState(); // Load saved state first
        // updateUI(); // Update display based on loaded state
        // Show landing page initially
        landingPage.style.display = 'block'; // [cite: 1]


      }); // End DOMContentLoaded
    })(); // End IIFE
  </script>
</body>
</html>
